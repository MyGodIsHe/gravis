# Архитектура редактора

## Класс Loader

Загрузчик уровня. С помощью ANTLR загружает исходник. Ищет изолированные графы, каждый граф выравнивается и отрисовывается рядом друг с другом.

Методы:
* Start - точка входа
* LineTo - рисует стрелочку от одного узла к другому

## Класс Valume

Вспомоигательный класс, для подсчёта центра и границы всех узлов. Помогает центрировать камеру.

## Класс Node

Базовый класс для отображения узла. На основе него, делаются префабы для каждого типа узла в языке.

Поля:
* gameObject - объект отрисовки
* inputs - список входных узлов
* outputs  - список выходных узлов
* position - расположение объекта в мире
* text - один-два символа, выводится в центре объекта
* type - тип узла, связан с типом узлов в языке

Методы:
* FindIsolatedGraphs - принимает все загруженные узлы, разбивает их на изолированные графы
* GetStartNode - вычисляет стартовый узел, с которого начинается вычисление
* AlignNodes - выравнивает расположение узлов, операторы выстраиваются сверху вниз, а их параметры на уровень выше

## Енум NodeType

Список типов узлов языка

## ANTLR

Содержит автос-генерированные классы: GravisBaseListener.cs, GravisLexer.cs, GravisListener.cs, GravisParser.cs. На основе GravisBaseListener строится класс LoadListener. Который генерирует объекты класса Nodes, связывает входные и выходные параметры каждого узла. Далее, на основе этих данных, можно построить граф.

## Класс DragMouseOrbit

Реализует управление камерой с помощью мышки - поворот и приближение/удаление.
